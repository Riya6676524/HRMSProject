<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - HRMS</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="~/Content/Layout.css" rel="stylesheet" />


 
</head>
<body>

    <!-- Header -->
    <div class="header">
        <div class="left-logo">

            <img src="~/Content/Uploads/HeaderCompanyLogo.png" alt="Optimum Info" />


        </div>



        <div class="right-actions">
            <div class="attendance-dropdown" onclick="toggleAttendanceMenu(event)">
                <button id="attendanceButton">Mark Attendance</button>
                <div class="attendance-options" id="attendanceOptions">
                    <div onclick="selectAttendance('WFH')">WFH</div>
                    <div onclick="selectAttendance('WFO')">WFO</div>
                </div>
            </div>

            <i class="fas fa-bell notification"></i>
<<<<<<< HEAD

=======
            <img src="" alt="Profile" class="profile-img-header" id="profileImgHeader" />
>>>>>>> c905f3f3de17fc9d98420655942a625019de01ba
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="profile-section">
            <br />
            <img src="" alt="Profile" class="profile-img" id="profileImg" />
            <div>
                <strong id="profileName"></strong><br />
                <span id="profileEmpId"></span><br />
                <span id="profileRol"></span>
            </div>
        </div>

        <ul class="menu-list" id="menuList">
<<<<<<< HEAD
=======
            
>>>>>>> c905f3f3de17fc9d98420655942a625019de01ba
        </ul>

        <br />
        <!-- Logout Button -->
        <form action="/Login/Logout" method="get" style="display: inline"; onsubmit="localStorage.removeItem('openMenuIds')">
            <button type="submit" class="logout-btn">
                Logout <i class="fas fa-sign-out-alt"></i>
            </button>
        </form>

    </div>


    <!-- Main Content -->
<<<<<<< HEAD
    <div class="content" id="mainContent">
=======
    <div class="content">
>>>>>>> c905f3f3de17fc9d98420655942a625019de01ba
        @RenderBody()

        <footer class="text-center mt-4">
            <hr />
            <p>&copy; @DateTime.Now.Year - HRMS Application</p>
        </footer>
    </div>

<<<<<<< HEAD

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/Scripts/Dashbboard.js"></script>

</body>
</html> 
=======
    
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function () {
            loadNavbarData();
            loadSidebarMenus();
        });

        function loadNavbarData() {
            $.getJSON('/Dashboard/GetNavbarData', function (data) {
                $('#profileImg').attr('src', data.ProfileImagePath);
                $('#profileImgHeader').attr('src', data.ProfileImagePath);
                $('#profileName').text(`${data.FirstName} ${data.MiddleName} ${data.LastName}`);
                $('#profileEmpId').text(`ID: ${data.EmployeeID}`);
                $('#profileRol').text(`Role: ${data.RoleName}`);
            });
        }

        function loadSidebarMenus() {
            $.getJSON('/Dashboard/GetMenus', function (menus) {
                let html = '';
                const parentMenus = menus.filter(m => m.ParentMenuID === null);

                parentMenus.forEach(menu => {
                    const subMenus = menus.filter(m => m.ParentMenuID === menu.MenuID);

                    if (subMenus.length > 0) {
                        html += `<li class="has-dropdown">
                                        <a href="javascript:void(0)" onclick="toggleDropdown(this)">
                                            <i class="${menu.IconeClass}"></i> ${menu.MenuName}
                                        </a>
                                        <ul class="submenu">`;

                        subMenus.forEach(sub => {
                            html += `<li><a href="/${sub.ControllerName}/${sub.ActionName}"><i class="${sub.IconeClass}"></i> ${sub.MenuName}</a></li>`;
                        });

                        html += `</ul></li>`;
                    } else {
                        html += `<li><a href="/${menu.ControllerName}/${menu.ActionName}"><i class="${menu.IconeClass}"></i> ${menu.MenuName}</a></li>`;
                    }
                });

                $('#menuList').html(html);
            });
        }

        function toggleDropdown(element) {
            const parent = element.closest('li');
            const submenu = parent.querySelector('.submenu');
            if (submenu) {
                submenu.classList.toggle('show');
            }
        }

        function toggleAttendanceMenu(event) {
            event.stopPropagation();
            const menu = document.getElementById('attendanceOptions');
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
        }

        function selectAttendance(type) {
            document.getElementById('attendanceButton').textContent = type;
            document.getElementById('attendanceOptions').style.display = 'none';
            console.log("Attendance marked:", type);
        }

        window.addEventListener('click', function () {
            document.getElementById('attendanceOptions').style.display = 'none';
        });
    </script>

</body>
</html>
>>>>>>> c905f3f3de17fc9d98420655942a625019de01ba
